ğŸš€ Comprehensive API Testing Script
====================================

[0;36mğŸ“‹ Setting up test data...[0m
====================================
[0;32mâœ… Test user created: apitest-1766182620@example.com (ID: 18)[0m
[0;32mâœ… Authentication token obtained[0m

[0;34mğŸ” Testing User Service - Authentication[0m
==============================================
[0;32mâœ… GET /auth/test (HTTP 200)[0m
[0;32mâœ… POST /auth/simple-test (HTTP 200)[0m
[0;32mâœ… POST /auth/register (new user) (HTTP 201)[0m
{
  "token": "jwt-token-19-1766182621326",
  "type": "Bearer",
  "userId": 19,
  "email": "duplicate-1766182620@example.com",
[0;32mâœ… POST /auth/register (duplicate email) - Correctly rejected[0m

[0;34mğŸ‘¤ Testing User Service - User Management[0m
==============================================
[0;32mâœ… GET /users/ping (HTTP 200)[0m
{
  "service": "user-service",
  "status": "ok"
}
[0;32mâœ… GET /users (list all) (HTTP 200)[0m
[
  {
    "id": 1,
    "email": "admin@eventplatform.com",
    "firstName": "Admin",
[0;31mâŒ GET /users/me (authenticated) (HTTP 500, expected 200)[0m
{
  "message": "An unexpected error occurred",
  "error": "Internal Server Error",
  "status": 500,
  "timestamp": "2025-12-19T23:17:01.451707453"
}
[0;32mâœ… GET /users/{id} (HTTP 200)[0m
{
  "id": 18,
  "email": "apitest-1766182620@example.com",
  "firstName": "API",
  "lastName": "Test",
[0;32mâœ… PUT /users/{id} (update user) (HTTP 200)[0m
{
  "id": 18,
  "email": "apitest-1766182620@example.com",
  "firstName": "Updated",
  "lastName": "Name",

[0;34mğŸ« Testing Event Service[0m
============================
[0;32mâœ… GET /events/ping (HTTP 200)[0m
[0;32mâœ… POST /events (create event) - Event ID: 8[0m
[0;32mâœ… GET /events/{eventId} (HTTP 200)[0m
{
  "id": 8,
  "title": "API Test Event 1766182620",
  "description": "Test event for API testing",
  "eventType": "CONFERENCE",
[0;32mâœ… GET /events (list all) (HTTP 200)[0m
{
  "content": [
    {
      "id": 1,
      "title": "Sample Conference",
[0;32mâœ… GET /events/organizer/{organizerId} (HTTP 200)[0m
[
  {
    "id": 8,
    "title": "API Test Event 1766182620",
    "description": "Test event for API testing",
[0;32mâœ… GET /events/search?query=API (HTTP 200)[0m
{
  "content": [
    {
      "id": 1,
      "title": "Sample Conference",
[0;32mâœ… GET /events/{eventId}/availability (HTTP 200)[0m
{
  "eventId": 8,
  "availableCapacity": 100
}
[0;32mâœ… POST /events/{eventId}/publish (HTTP 200)[0m
{
  "id": 8,
  "title": "API Test Event 1766182620",
  "description": "Test event for API testing",
  "eventType": "CONFERENCE",
[0;32mâœ… POST /events/{eventId}/reserve?quantity=2 (HTTP 200)[0m
{
  "eventId": 8,
  "quantity": 2,
  "success": true,
  "message": "Capacity reserved successfully"
[0;32mâœ… POST /events/{eventId}/release?quantity=1 (HTTP 200)[0m
[0;32mâœ… PUT /events/{eventId} (update event) (HTTP 200)[0m
{
  "id": 8,
  "title": "Updated API Test Event",
  "description": "Updated description",
  "eventType": "CONFERENCE",

[0;34mğŸŸï¸  Testing Reservation Service[0m
====================================
[0;32mâœ… GET /reservations/ping (HTTP 200)[0m
{
  "service": "reservation-service",
  "status": "ok"
}
[0;32mâœ… POST /reservations (create reservation) - Reservation ID: 17, ReservationId: RES-6196D3CF[0m
[0;32mâœ… GET /reservations (list all) (HTTP 200)[0m
[
  {
    "id": 1,
    "reservationId": "RES-64385063",
    "userId": 2,
[0;32mâœ… GET /reservations/{reservationId} (HTTP 200)[0m
{
  "id": 17,
  "reservationId": "RES-6196D3CF",
  "userId": 18,
  "eventId": 8,
[0;32mâœ… GET /reservations/user/{userId} (HTTP 200)[0m
[
  {
    "id": 17,
    "reservationId": "RES-6196D3CF",
    "userId": 18,
[0;32mâœ… PUT /reservations/{reservationId} (update) (HTTP 200)[0m
{
  "id": 17,
  "reservationId": "RES-6196D3CF",
  "userId": 18,
  "eventId": 8,
[0;32mâœ… POST /reservations/{reservationId}/confirm (HTTP 200)[0m
{
  "id": 17,
  "reservationId": "RES-6196D3CF",
  "userId": 18,
  "eventId": 8,
[0;32mâœ… POST /reservations/{reservationId}/cancel (HTTP 200)[0m
{
  "id": 17,
  "reservationId": "RES-6196D3CF",
  "userId": 18,
  "eventId": 8,

[0;34mğŸ’³ Testing Payment Service[0m
=============================
[0;32mâœ… GET /payments/ping (HTTP 200)[0m
{
  "service": "payment-service",
  "status": "ok"
}
[0;32mâœ… POST /payments/intents (create intent) - Intent ID: 10, IntentId: PI-7A3D2449[0m
[0;32mâœ… GET /payments/intents/{intentId} (HTTP 200)[0m
{
  "id": 10,
  "intentId": "PI-7A3D2449",
  "reservationId": "RES-93C4AE78",
  "userId": 18,
[0;32mâœ… GET /payments/intents/user/{userId} (HTTP 200)[0m
[
  {
    "id": 10,
    "intentId": "PI-7A3D2449",
    "reservationId": "RES-93C4AE78",
[0;32mâœ… POST /payments/intents/{intentId}/capture (HTTP 200)[0m
{
  "id": 6,
  "paymentId": "PAY-504B0E2A",
  "intentId": "PI-7A3D2449",
  "reservationId": "RES-93C4AE78",
[0;32mâœ… POST /payments (legacy endpoint) - Payment ID: 7, PaymentId: PAY-C479CBC5[0m
[0;32mâœ… GET /payments (list all) (HTTP 200)[0m
[
  {
    "id": 1,
    "paymentId": "PAY-D4DE920C",
    "intentId": "PI-9404ACD8",
[0;32mâœ… GET /payments/{paymentId} (HTTP 200)[0m
{
  "id": 7,
  "paymentId": "PAY-C479CBC5",
  "intentId": "PI-4DD22FF6",
  "reservationId": "RES-857C441C",
[0;32mâœ… GET /payments/user/{userId} (HTTP 200)[0m
[
  {
    "id": 6,
    "paymentId": "PAY-504B0E2A",
    "intentId": "PI-7A3D2449",
[0;32mâœ… PUT /payments/{paymentId}/status (HTTP 200)[0m
{
  "id": 7,
  "paymentId": "PAY-C479CBC5",
  "intentId": "PI-4DD22FF6",
  "reservationId": "RES-857C441C",
[0;32mâœ… POST /payments/{paymentId}/process (HTTP 200)[0m
{
  "id": 7,
  "paymentId": "PAY-C479CBC5",
  "intentId": "PI-4DD22FF6",
  "reservationId": "RES-857C441C",
[0;32mâœ… POST /payments/cleanup (HTTP 200)[0m

[0;36mğŸ“Š Test Summary[0m
====================================
Total Tests: [0;34m40[0m
Passed: [0;32m39[0m
Failed: [0;31m1[0m

[1;33mâš ï¸  Some tests failed. Please review the output above.[0m
